{"version":3,"file":"morpher.min.js","sources":["../node_modules/node-fetch/browser.js","../src/communicator.js","../src/russian/declension-forms.js","../src/russian/full-name.js","../src/russian/declension-result.js","../src/russian/number-spelling-result.js","../src/morpher-error.js","../src/russian/client.js","../src/qazaq/declension-forms.js","../src/qazaq/same-number-forms.js","../src/qazaq/declension-result.js","../src/qazaq/client.js","../src/morpher.js"],"sourcesContent":["\"use strict\";\n\n// ref: https://github.com/tc39/proposal-global\nvar getGlobal = function () {\n\t// the only reliable means to get the global object is\n\t// `Function('return this')()`\n\t// However, this causes CSP violations in Chrome apps.\n\tif (typeof self !== 'undefined') { return self; }\n\tif (typeof window !== 'undefined') { return window; }\n\tif (typeof global !== 'undefined') { return global; }\n\tthrow new Error('unable to locate global object');\n}\n\nvar global = getGlobal();\n\nmodule.exports = exports = global.fetch;\n\n// Needed for TypeScript and Webpack.\nif (global.fetch) {\n\texports.default = global.fetch.bind(global);\n}\n\nexports.Headers = global.Headers;\nexports.Request = global.Request;\nexports.Response = global.Response;","'use strict';\n\nif (!global.fetch) {\n  global.fetch = require('node-fetch');\n}\n\nclass Communicator {\n\n  static METHOD_GET = 'GET';\n  static METHOD_DELETE = 'DELETE';\n  static METHOD_POST = 'POST';\n\n  baseUrl = 'https://ws3.morpher.ru';\n  token = null;\n  timeoutMs = 3000;\n\n  constructor(params = {}) {\n    if (params.baseUrl !== undefined) {\n\n      if (params.baseUrl.indexOf('http') !== -1) {\n        this.baseUrl = params.baseUrl;\n      } else {\n        this.baseUrl = 'http://' + params.baseUrl;\n      }\n\n    }\n\n    if (params.token !== undefined) {\n      this.token = params.token;\n    }\n\n    if (params.timeoutMs !== undefined) {\n      this.timeoutMs = params.timeoutMs;\n    }\n  }\n\n  request(path, params, method) {\n\n    const url = this.buildUrl(path, params);\n\n    const contentType = this.isPost(method)\n        ? 'application/x-www-form-urlencoded'\n        : 'application/json';\n\n    const init = {\n      method: method,\n      headers: {\n        'Content-Type': contentType,\n        'Accept': 'application/json',\n      },\n    };\n\n    return new Promise((resolve, reject) => {\n      const timer = setTimeout(\n          () => reject(new Error('TIMEOUT')),\n          this.timeoutMs,\n      );\n\n      this.fetcher(url, init).then(value => {\n        clearTimeout(timer);\n        resolve(value);\n      }).catch(reason => {\n        clearTimeout(timer);\n        reject(reason);\n      });\n    });\n  }\n\n  buildUrl(path, params) {\n    let url = new URL(path, this.baseUrl);\n\n    params.forEach((value, name) => {\n      url.searchParams.append(name, value);\n    });\n\n    if (this.token) {\n      url.searchParams.append('token', this.token);\n    }\n\n    return url.toString();\n  }\n\n  _fetcher(url, init) {\n    return fetch(url, init);\n  }\n\n  set fetcher(fn) {\n    this._fetcher = fn;\n  }\n\n  get fetcher() {\n    return this._fetcher;\n  }\n\n  isPost(method) {\n    return method.toUpperCase() === Communicator.METHOD_POST;\n  }\n\n}\n\nmodule.exports = Communicator;","'use strict';\n\nclass DeclensionForms {\n\n  constructor(props) {\n    if (props['И'] !== undefined) {\n      this.nominative = props['И'];\n      this['именительный'] = this.nominative;\n    }\n\n    this.genitive = props['Р'];\n    this['родительный'] = this.genitive;\n\n    this.dative = props['Д'];\n    this['дательный'] = this.dative;\n\n    this.accusative = props['В'];\n    this['винительный'] = this.accusative;\n\n    this.instrumental = props['Т'];\n    this['творительный'] = this.instrumental;\n\n    this.prepositional = props['П'];\n    this['предложный'] = this.prepositional;\n\n    if (props['П_о'] !== undefined) {\n      this.prepositional_O = props['П_о'];\n      this['предложный_О'] = this.prepositional_O;\n    }\n  }\n\n}\n\nmodule.exports = DeclensionForms;","'use strict';\n\nclass FullName {\n  constructor(props) {\n    this.name = props['И'];\n    this['имя'] = this.name;\n\n    this.surname = props['Ф'];\n    this['фамилия'] = this.surname;\n\n    this.patronymic = props['О'];\n    this['отчество'] = this.patronymic;\n  }\n}\n\nmodule.exports = FullName;","'use strict';\n\nconst DeclensionForms = require('./declension-forms');\nconst FullName = require('./full-name');\n\nclass DeclensionResult extends DeclensionForms {\n\n  constructor(props) {\n    super(props);\n\n    if (props['род'] !== undefined) {\n      this.gender = props['род'];\n      this['род'] = this.gender;\n    }\n\n    if (props['множественное'] !== undefined) {\n      this.plural = new DeclensionForms(props['множественное']);\n      this['множественное'] = this['plural'];\n    }\n\n    if (props['где'] !== undefined) {\n      this.where = props['где'];\n      this.locative = this.where;\n      this.gde = this.where;\n      this['где'] = this.where;\n    }\n\n    if (props['куда'] !== undefined) {\n      this.where_to = props['куда'];\n      this.kuda = this.where_to;\n      this['куда'] = this.where_to;\n    }\n\n    if (props['откуда'] !== undefined) {\n      this.where_from = props['откуда'];\n      this.whence = this.where_from;\n      this.otkuda = this.where_from;\n      this['откуда'] = this.where_from;\n    }\n\n    if (props['ФИО'] !== undefined) {\n      this.fullName = new FullName(props['ФИО']);\n      this['фио'] = this.fullName;\n    }\n  }\n\n}\n\nmodule.exports = DeclensionResult;","'use strict';\n\nconst DeclensionForms = require('./declension-forms');\n\nclass NumberSpellingResult {\n  constructor(props) {\n    this.n = new DeclensionForms(props['n']);\n    this.unit = new DeclensionForms(props['unit']);\n  }\n}\n\nmodule.exports = NumberSpellingResult;","'use strict';\n\nclass MorpherError extends Error {\n  constructor(message, code) {\n    super(message);\n    this.code = code;\n  }\n}\n\nmodule.exports = MorpherError;","'use strict';\n\nconst Communicator = require('../communicator');\nconst DeclensionResult = require('./declension-result');\nconst NumberSpellingResult = require('./number-spelling-result');\nconst MorpherError = require('../morpher-error');\n\nclass Client {\n\n  prefix = '/russian';\n\n  constructor(communicator) {\n    this.communicator = communicator;\n  }\n\n  declension(phrase, ...flags) {\n    const params = new Map();\n    params.set('s', phrase);\n\n    if (flags.length > 0) {\n      params.set('flags', flags.join(','));\n    }\n\n    const path = this.prefix + '/declension';\n\n    return this.communicator.request(path, params, Communicator.METHOD_GET).\n        then(response => response.json()).\n        then(data => {\n          if (data['message'] && data['code']) {\n            throw new MorpherError(data['message'], data['code']);\n          }\n\n          return new DeclensionResult(data);\n        });\n  }\n\n  spell(number = 0, unit = '') {\n    const params = new Map();\n    params.set('n', number);\n    params.set('unit', unit);\n\n    const path = this.prefix + '/spell';\n\n    return this.communicator.request(path, params, Communicator.METHOD_GET).\n        then(response => response.json()).\n        then(data => {\n          if (data['message'] && data['code']) {\n            throw new MorpherError(data['message'], data['code']);\n          }\n\n          return new NumberSpellingResult(data);\n        });\n  }\n\n}\n\nmodule.exports = Client;","'use strict';\n\nclass DeclensionForms {\n\n  constructor(props) {\n\n    if (props['A'] !== undefined) {\n      this.nominative = props['A'];\n      this['атау'] = this.nominative;\n    }\n\n    this.genitive = props['І'];\n    this['ілік'] = this.genitive;\n\n    this.dative = props['Б'];\n    this['барыс'] = this.dative;\n\n    this.accusative = props['Т'];\n    this['табыс'] = this.accusative;\n\n    this.ablative = props['Ш'];\n    this['шығыс'] = this.ablative;\n\n    this.locative = props['Ж'];\n    this['жатыс'] = this.locative;\n\n    this.instrumental = props['К'];\n    this['көмектес'] = this.instrumental;\n\n  }\n\n}\n\nmodule.exports = DeclensionForms;","'use strict';\n\nconst DeclensionForms = require('./declension-forms');\n\nclass SameNumberForms extends DeclensionForms {\n\n  constructor(props) {\n    super(props);\n\n    this.firstPerson = new DeclensionForms(props['менің']);\n    this['менің'] = this.firstPerson;\n\n    this.secondPerson = new DeclensionForms(props['сенің']);\n    this['сенің'] = this.secondPerson;\n\n    this.secondPersonRespectful = new DeclensionForms(props['сіздің']);\n    this['сіздің'] = this.secondPersonRespectful;\n\n    this.thirdPerson = new DeclensionForms(props['оның']);\n    this['оның'] = this.thirdPerson;\n\n    this.firstPersonPlural = new DeclensionForms(props['біздің']);\n    this['біздің'] = this.firstPersonPlural;\n\n    this.secondPersonPlural = new DeclensionForms(props['сендердің']);\n    this['сендердің'] = this.secondPersonPlural;\n\n    this.secondPersonRespectfulPlural = new DeclensionForms(props['сіздердің']);\n    this['сіздердің'] = this.secondPersonRespectfulPlural;\n\n    this.thirdPersonPlural = new DeclensionForms(props['олардың']);\n    this['олардың'] = this.thirdPersonPlural;\n\n  }\n\n}\n\nmodule.exports = SameNumberForms;","'use strict';\n\nconst SameNumberForms = require('./same-number-forms');\n\nclass DeclensionResult extends SameNumberForms {\n\n  constructor(props) {\n    super(props);\n\n    this.plural = new SameNumberForms(props['көпше']);\n    this['көпше'] = this.plural;\n  }\n\n}\n\nmodule.exports = DeclensionResult;","'use strict';\n\nconst Communicator = require('../communicator');\nconst DeclensionResult = require('./declension-result');\nconst MorpherError = require('../morpher-error');\n\nclass Client {\n\n  prefix = '/qazaq';\n\n  constructor(communicator) {\n    this.communicator = communicator;\n  }\n\n  declension(phrase) {\n    const params = new Map();\n    params.set('s', phrase);\n\n    const path = this.prefix + '/declension';\n\n    return this.communicator.request(path, params, Communicator.METHOD_GET).\n        then(response => response.json()).\n        then(data => {\n          if (data['message'] && data['code']) {\n            throw new MorpherError(data['message'], data['code']);\n          }\n\n          return new DeclensionResult(data);\n        });\n  }\n}\n\nmodule.exports = Client;","'use strict';\n\nconst Communicator = require('./communicator');\nconst RussianClient = require('./russian/client');\nconst QazaqClient = require('./qazaq/client');\n\nclass Morpher {\n\n  static FLAG_FEMININE = 'feminine';\n  static FLAG_MASCULINE = 'masculine';\n  static FLAG_ANIMATE = 'animate';\n  static FLAG_INANIMATE = 'inanimate';\n  static FLAG_COMMON = 'common';\n  static FLAG_NAME = 'name';\n  static FLAG_NEUTER = 'neuter';\n  static FLAG_PLURAL = 'plural';\n\n  constructor(params) {\n    this.communicator = new Communicator(params);\n  }\n\n  set communicator(value) {\n    this._communicator = value;\n  }\n\n  get communicator() {\n    return this._communicator;\n  }\n\n  get russian() {\n    return new RussianClient(this.communicator);\n  }\n\n  get qazaq() {\n    return new QazaqClient(this.communicator);\n  }\n\n}\n\nmodule.exports = Morpher;"],"names":["global","self","window","Error","getGlobal","module","exports","fetch","bind","Headers","Request","Response","require$$0","Communicator","params","undefined","baseUrl","indexOf","token","timeoutMs","path","method","url","this","buildUrl","init","headers","isPost","Promise","resolve","reject","timer","setTimeout","_this","fetcher","then","value","clearTimeout","reason","URL","forEach","name","searchParams","append","toString","_fetcher","fn","toUpperCase","METHOD_POST","props","nominative","genitive","dative","accusative","instrumental","prepositional","prepositional_O","surname","patronymic","gender","plural","DeclensionForms","where","locative","gde","where_to","kuda","where_from","whence","otkuda","fullName","FullName","n","unit","message","code","communicator","phrase","Map","set","flags","length","join","prefix","request","METHOD_GET","response","json","data","MorpherError","DeclensionResult","number","NumberSpellingResult","ablative","firstPerson","secondPerson","secondPersonRespectful","thirdPerson","firstPersonPlural","secondPersonPlural","secondPersonRespectfulPlural","thirdPersonPlural","SameNumberForms","Morpher","_communicator","RussianClient","QazaqClient"],"mappings":"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"}